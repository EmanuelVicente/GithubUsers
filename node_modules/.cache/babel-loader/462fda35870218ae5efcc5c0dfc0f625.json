{"ast":null,"code":"var _jsxFileName = \"/Users/xoor/Desktop/a/exersice/github_users/GithubUsers/src/screens/UsersSearch/UsersSearch.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { memo, useState, useMemo, useCallback } from \"react\";\nimport { useLazyQuery } from \"@apollo/client\"; //Components\n\nimport SearchBar from \"./../../components/SearchBar/SearchBar\";\nimport Table from \"./../../components/Table/Table\"; //Types\n\nimport { AlignEnum } from \"./../../components/Table/types\"; //Graphql\n\nimport { searchQueryUsers } from \"../../graphql/query\"; //Styles\n\nimport { TitleStyled, Container } from \"./styles\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst UserSearch = () => {\n  _s();\n\n  var _data$search3, _data$search4;\n\n  const [result, setResult] = useState(\"\");\n  const [resultDebounce, setResultDebounce] = useState(\"\");\n  const [getUsers, {\n    data,\n    fetchMore,\n    error\n  }] = useLazyQuery(searchQueryUsers);\n  console.log(\"data\", data, error); // useEffect(() => {\n  //   console.log(\"query2\", result, resultDebounce, result !== resultDebounce);\n  //   if (result !== resultDebounce)\n  //     debounce(() => setResultDebounce(result), 500)();\n  // }, [result, resultDebounce]);\n  // useEffect(() => {\n  //   console.log(\"query\", resultDebounce, getUsers);\n  //   getUsers({\n  //     variables: {\n  //       query: resultDebounce,\n  //       type: \"USER\",\n  //       first: 20,\n  //     },\n  //   });\n  //   // eslint-disable-next-line react-hooks/exhaustive-deps\n  // }, [resultDebounce, getUsers]);\n\n  const parsedData = useMemo(() => {\n    var _data$search, _data$search$nodes;\n\n    return (data === null || data === void 0 ? void 0 : (_data$search = data.search) === null || _data$search === void 0 ? void 0 : (_data$search$nodes = _data$search.nodes) === null || _data$search$nodes === void 0 ? void 0 : _data$search$nodes.map(node => {\n      return {\n        id: node.id,\n        data: [{\n          value: node.name,\n          align: AlignEnum.left\n        }, {\n          value: node.email,\n          align: AlignEnum.left\n        }, {\n          value: node.location,\n          align: AlignEnum.left\n        }, {\n          value: node.url,\n          align: AlignEnum.left\n        }] || []\n      };\n    })) || [];\n  }, [data]);\n  const fetchUsers = useCallback(() => {\n    var _data$search2;\n\n    fetchMore({\n      variables: {\n        query: resultDebounce,\n        type: \"USER\",\n        after: data === null || data === void 0 ? void 0 : (_data$search2 = data.search) === null || _data$search2 === void 0 ? void 0 : _data$search2.pageInfo.endCursor,\n        first: 40\n      }\n    });\n  }, [data === null || data === void 0 ? void 0 : (_data$search3 = data.search) === null || _data$search3 === void 0 ? void 0 : _data$search3.pageInfo.endCursor, fetchMore, resultDebounce]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(SearchBar, {\n      onChangeSearch: setResult\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(TitleStyled, {\n        text: \"Users\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Table, {\n        header: [{\n          value: \"Name\",\n          align: AlignEnum.left\n        }, {\n          value: \"Email\",\n          align: AlignEnum.left\n        }, {\n          value: \"Location\",\n          align: AlignEnum.left\n        }, {\n          value: \"Url\",\n          align: AlignEnum.left\n        }],\n        data: parsedData,\n        nextPage: fetchUsers,\n        hasMore: (data === null || data === void 0 ? void 0 : (_data$search4 = data.search) === null || _data$search4 === void 0 ? void 0 : _data$search4.pageInfo.hasNextPage) || false\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(UserSearch, \"e43mM3bxKduBT0bSa5zFcgjkHIw=\", false, function () {\n  return [useLazyQuery];\n});\n\n_c = UserSearch;\nexport default _c2 = /*#__PURE__*/memo(UserSearch);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"UserSearch\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["React","memo","useState","useMemo","useCallback","useLazyQuery","SearchBar","Table","AlignEnum","searchQueryUsers","TitleStyled","Container","UserSearch","result","setResult","resultDebounce","setResultDebounce","getUsers","data","fetchMore","error","console","log","parsedData","search","nodes","map","node","id","value","name","align","left","email","location","url","fetchUsers","variables","query","type","after","pageInfo","endCursor","first","hasNextPage"],"sources":["/Users/xoor/Desktop/a/exersice/github_users/GithubUsers/src/screens/UsersSearch/UsersSearch.tsx"],"sourcesContent":["import React, { memo, useState, useMemo, useEffect, useCallback } from \"react\";\nimport debounce from \"lodash.debounce\";\nimport { useLazyQuery } from \"@apollo/client\";\n\n//Components\nimport SearchBar from \"./../../components/SearchBar/SearchBar\";\nimport Table from \"./../../components/Table/Table\";\n\n//Types\nimport { AlignEnum } from \"./../../components/Table/types\";\n\n//Graphql\nimport {\n  SearchQueryUsersProps,\n  SearchQueryUsersNodeProps,\n  searchQueryUsers,\n} from \"../../graphql/query\";\n\n//Styles\nimport { TitleStyled, Container } from \"./styles\";\n\nconst UserSearch = () => {\n  const [result, setResult] = useState<string>(\"\");\n  const [resultDebounce, setResultDebounce] = useState<string>(\"\");\n\n  const [getUsers, { data, fetchMore, error }] =\n    useLazyQuery<SearchQueryUsersProps>(searchQueryUsers);\n\n  console.log(\"data\", data, error);\n  // useEffect(() => {\n  //   console.log(\"query2\", result, resultDebounce, result !== resultDebounce);\n  //   if (result !== resultDebounce)\n  //     debounce(() => setResultDebounce(result), 500)();\n  // }, [result, resultDebounce]);\n\n  // useEffect(() => {\n  //   console.log(\"query\", resultDebounce, getUsers);\n  //   getUsers({\n  //     variables: {\n  //       query: resultDebounce,\n  //       type: \"USER\",\n  //       first: 20,\n  //     },\n  //   });\n  //   // eslint-disable-next-line react-hooks/exhaustive-deps\n  // }, [resultDebounce, getUsers]);\n\n  const parsedData = useMemo(\n    () =>\n      data?.search?.nodes?.map((node: SearchQueryUsersNodeProps) => {\n        return {\n          id: node.id,\n          data:\n            [\n              {\n                value: node.name,\n                align: AlignEnum.left,\n              },\n              {\n                value: node.email,\n                align: AlignEnum.left,\n              },\n              {\n                value: node.location,\n                align: AlignEnum.left,\n              },\n              {\n                value: node.url,\n                align: AlignEnum.left,\n              },\n            ] || [],\n        };\n      }) || [],\n    [data]\n  );\n\n  const fetchUsers = useCallback(() => {\n    fetchMore({\n      variables: {\n        query: resultDebounce,\n        type: \"USER\",\n        after: data?.search?.pageInfo.endCursor,\n        first: 40,\n      },\n    });\n  }, [data?.search?.pageInfo.endCursor, fetchMore, resultDebounce]);\n\n  return (\n    <>\n      <SearchBar onChangeSearch={setResult} />\n      <Container>\n        <TitleStyled text=\"Users\" />\n        <Table\n          header={[\n            {\n              value: \"Name\",\n              align: AlignEnum.left,\n            },\n            {\n              value: \"Email\",\n              align: AlignEnum.left,\n            },\n            {\n              value: \"Location\",\n              align: AlignEnum.left,\n            },\n            {\n              value: \"Url\",\n              align: AlignEnum.left,\n            },\n          ]}\n          data={parsedData}\n          nextPage={fetchUsers}\n          hasMore={data?.search?.pageInfo.hasNextPage || false}\n        />\n      </Container>\n    </>\n  );\n};\n\nexport default memo(UserSearch);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}